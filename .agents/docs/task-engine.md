# AI ä»»åŠ¡æ‰§è¡Œå¼•æ“è¯´æ˜æ–‡æ¡£

## æ¦‚è¿°

æœ¬æ–‡æ¡£è¯´æ˜ AI å¦‚ä½•è‡ªåŠ¨è¯»å–ä»»åŠ¡é…ç½®æ–‡ä»¶ã€ç¼–æ’æ‰§è¡Œé¡ºåºã€ç”Ÿæˆä»£ç å’Œæ–‡æ¡£ï¼Œå®ç°è‡ªåŠ¨åŒ–å¼€å‘å·¥ä½œæµã€‚

## å·¥ä½œåŸç†

### 1. ä»»åŠ¡å‘ç°ä¸åŠ è½½

```
AIå¯åŠ¨
    â†“
æ‰«æ .agents/tasks/*.yaml
    â†“
è§£æYAMLæ–‡ä»¶ï¼Œæ„å»ºä»»åŠ¡æ ‘
    â†“
éªŒè¯ä»»åŠ¡æ ¼å¼å’Œä¾èµ–å…³ç³»
```

**AIæ“ä½œ**ï¼š
```python
# ä¼ªä»£ç ç¤ºä¾‹
tasks = load_all_tasks_from(".agents/tasks/")
task_graph = build_dependency_graph(tasks)
validate_no_circular_dependencies(task_graph)
```

### 2. ä»»åŠ¡çŠ¶æ€æœº

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ pending â”‚  åˆå§‹çŠ¶æ€
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚ (æ£€æŸ¥ä¾èµ–)
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ready  â”‚  ä¾èµ–å·²æ»¡è¶³ï¼Œå¯æ‰§è¡Œ
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚ (AIå¼€å§‹æ‰§è¡Œ)
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ in_progress  â”‚  æ‰§è¡Œä¸­
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â†’ (æˆåŠŸ) â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚          â”‚ completed â”‚  å®Œæˆ
       â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â””â”€â†’ (å¤±è´¥) â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ failed  â”‚  å¤±è´¥ï¼ˆå¯é‡è¯•ï¼‰
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. æ‰§è¡Œæµç¨‹

#### æ­¥éª¤1ï¼šæŸ¥æ‰¾å¯æ‰§è¡Œä»»åŠ¡

AIéå†æ‰€æœ‰ä»»åŠ¡ï¼Œæ‰¾å‡ºæ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„ä»»åŠ¡ï¼š
- âœ… `status = "pending"` æˆ– `status = "ready"`
- âœ… æ‰€æœ‰ `dependencies` ä¸­çš„ä»»åŠ¡çŠ¶æ€ä¸º `completed`
- âœ… æ‰€å± Milestone/Epic æœªè¢«é˜»å¡

#### æ­¥éª¤2ï¼šä»»åŠ¡ä¼˜å…ˆçº§æ’åº

æ’åºè§„åˆ™ï¼ˆä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼‰ï¼š
1. **Milestone deadline**ï¼šæˆªæ­¢æ—¶é—´è¿‘çš„ä¼˜å…ˆ
2. **Priority**ï¼šcritical > high > medium > low
3. **Task type**ï¼šdatabase_design > scaffolding > development > documentation
4. **Task ID**ï¼šå­—å…¸åºï¼ˆä¿è¯ç¡®å®šæ€§ï¼‰

#### æ­¥éª¤3ï¼šæ‰§è¡Œä»»åŠ¡

æ ¹æ® `task.execution.action` æ‰§è¡Œä¸åŒæ“ä½œï¼š

| Action | è¯´æ˜ | AIæ“ä½œ |
|--------|------|--------|
| `create_file` | åˆ›å»ºæ–‡ä»¶ | ä½¿ç”¨æ¨¡æ¿æˆ–ç”Ÿæˆå†…å®¹ï¼Œè°ƒç”¨ `Create` å·¥å…· |
| `generate_code` | ç”Ÿæˆä»£ç  | æ ¹æ®éœ€æ±‚ç”ŸæˆJava/JavaScriptä»£ç  |
| `run_command` | æ‰§è¡Œå‘½ä»¤ | è°ƒç”¨ `Execute` å·¥å…·è¿è¡ŒShellå‘½ä»¤ |
| `create_spring_boot_project` | åˆ›å»ºSpring Booté¡¹ç›® | ç”Ÿæˆpom.xmlã€ç›®å½•ç»“æ„ã€å¯åŠ¨ç±» |
| `design_database` | è®¾è®¡æ•°æ®åº“ | ç”ŸæˆSQLå»ºè¡¨è¯­å¥å’ŒERå›¾ |
| `write_documentation` | ç¼–å†™æ–‡æ¡£ | ç”ŸæˆMarkdownæ–‡æ¡£ |

**ç¤ºä¾‹ï¼šæ‰§è¡Œ create_file ä»»åŠ¡**

```yaml
tasks:
  - id: "T0.1.1.1"
    title: "åˆ›å»ºæŠ€æœ¯æ¶æ„æ–‡æ¡£"
    type: "documentation"
    execution:
      action: "create_file"
      template: "tech_stack_template"
    deliverables:
      - path: ".agents/docs/tech-stack.md"
```

AIæ‰§è¡Œé€»è¾‘ï¼š
```python
# 1. è¯»å–ä»»åŠ¡
task = get_task("T0.1.1.1")

# 2. æ›´æ–°çŠ¶æ€
update_task_status(task.id, "in_progress")

# 3. ç”Ÿæˆå†…å®¹ï¼ˆä½¿ç”¨æ¨¡æ¿æˆ–AIç”Ÿæˆï¼‰
content = generate_content_from_template("tech_stack_template", task.context)

# 4. åˆ›å»ºæ–‡ä»¶
create_file(".agents/docs/tech-stack.md", content)

# 5. éªŒè¯äº¤ä»˜ç‰©
if file_exists(".agents/docs/tech-stack.md"):
    update_task_status(task.id, "completed")
else:
    update_task_status(task.id, "failed")
```

#### æ­¥éª¤4ï¼šéªŒè¯éªŒæ”¶æ ‡å‡†

æ‰§è¡Œå®Œæˆåï¼ŒAIæ£€æŸ¥ `acceptance_criteria`ï¼š

```yaml
acceptance_criteria:
  - "æ–‡ä»¶å·²åˆ›å»º"
  - "åŒ…å«æŠ€æœ¯æ ˆé€‰å‹ç« èŠ‚"
  - "åŒ…å«æ¶æ„å›¾"
```

AIéªŒè¯é€»è¾‘ï¼š
- æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- æ£€æŸ¥æ–‡ä»¶å†…å®¹æ˜¯å¦åŒ…å«å…³é”®è¯ï¼ˆå¦‚"æŠ€æœ¯æ ˆ"ã€"æ¶æ„å›¾"ï¼‰
- è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆå¦‚ä»£ç ç¼–è¯‘ã€å•å…ƒæµ‹è¯•ï¼‰

#### æ­¥éª¤5ï¼šæ›´æ–°ä»»åŠ¡çŠ¶æ€

- âœ… æ‰€æœ‰éªŒæ”¶æ ‡å‡†é€šè¿‡ â†’ `status = "completed"`
- âŒ ä»»ä½•éªŒæ”¶æ ‡å‡†å¤±è´¥ â†’ `status = "failed"`ï¼Œè®°å½•å¤±è´¥åŸå› 

### 4. æ‰¹é‡å¤„ç†

AIå¯ä»¥å¹¶è¡Œæ‰§è¡Œå¤šä¸ªæ— ä¾èµ–å…³ç³»çš„ä»»åŠ¡ï¼š

```
Task A â”€â”
Task B â”€â”¼â”€â†’ å¹¶è¡Œæ‰§è¡Œï¼ˆæ— ä¾èµ–ï¼‰
Task C â”€â”˜

Task D â”€â”€â†’ ç­‰å¾… Aã€Bã€C å®Œæˆåæ‰§è¡Œï¼ˆæœ‰ä¾èµ–ï¼‰
```

### 5. ä»»åŠ¡æ›´æ–°æœºåˆ¶

AIæ‰§è¡Œä»»åŠ¡æ—¶ï¼Œä¼šæ›´æ–°YAMLæ–‡ä»¶ä¸­çš„ä»»åŠ¡çŠ¶æ€ï¼š

**æ‰§è¡Œå‰ï¼š**
```yaml
- id: "T0.1.1.1"
  status: "pending"
  started_at: null
  completed_at: null
```

**æ‰§è¡Œä¸­ï¼š**
```yaml
- id: "T0.1.1.1"
  status: "in_progress"
  started_at: "2025-10-23T00:25:00Z"
  completed_at: null
```

**æ‰§è¡Œåï¼š**
```yaml
- id: "T0.1.1.1"
  status: "completed"
  started_at: "2025-10-23T00:25:00Z"
  completed_at: "2025-10-23T00:27:30Z"
  actual_minutes: 2.5
  deliverables_created:
    - ".agents/docs/tech-stack.md"
```

## AIæ‰§è¡Œæ¨¡å¼

### æ¨¡å¼1ï¼šäº¤äº’å¼æ‰§è¡Œï¼ˆæ¨èï¼‰

ç”¨æˆ·å‘é€å‘½ä»¤ï¼š`@ai execute-tasks`

AI å“åº”ï¼š
```
ğŸ” æ‰«æä»»åŠ¡æ–‡ä»¶...
ğŸ“‹ å‘ç° 15 ä¸ªä»»åŠ¡ï¼Œ3 ä¸ªå¯æ‰§è¡Œ

å¯æ‰§è¡Œä»»åŠ¡ï¼š
1. [T0.1.1.1] åˆ›å»ºæŠ€æœ¯æ¶æ„æ–‡æ¡£ (Priority: high)
2. [T0.2.1.1] åˆ›å»ºåç«¯é¡¹ç›®éª¨æ¶ (Priority: high)
3. [T0.3.1.1] è®¾è®¡æ•°æ®åº“è¡¨ç»“æ„ (Priority: high)

æ˜¯å¦æ‰§è¡Œæ‰€æœ‰ä»»åŠ¡ï¼Ÿ(y/n)
```

ç”¨æˆ·ç¡®è®¤åï¼ŒAIå¼€å§‹æ‰§è¡Œå¹¶å®æ—¶æŠ¥å‘Šè¿›åº¦ã€‚

### æ¨¡å¼2ï¼šè‡ªåŠ¨æ‰§è¡Œ

åœ¨ä»»åŠ¡æ–‡ä»¶ä¸­å¯ç”¨è‡ªåŠ¨æ¨¡å¼ï¼š

```yaml
config:
  auto_execution: true
  execution_policy:
    mode: "aggressive"  # aggressive | conservative
    max_parallel_tasks: 3
    require_confirmation: false
```

AIä¼šè‡ªåŠ¨å‘ç°å¹¶æ‰§è¡Œä»»åŠ¡ï¼Œæ— éœ€äººå·¥å¹²é¢„ã€‚

### æ¨¡å¼3ï¼šå•ä»»åŠ¡æ‰§è¡Œ

ç”¨æˆ·æŒ‡å®šç‰¹å®šä»»åŠ¡ï¼š`@ai execute-task T0.1.1.1`

AIä»…æ‰§è¡Œè¯¥ä»»åŠ¡åŠå…¶ä¾èµ–ã€‚

## é”™è¯¯å¤„ç†

### å¸¸è§é”™è¯¯åŠå¤„ç†ç­–ç•¥

| é”™è¯¯ç±»å‹ | AIå¤„ç†ç­–ç•¥ |
|---------|-----------|
| ä¾èµ–å¾ªç¯ | æ£€æµ‹å¹¶æŠ¥å‘Šå¾ªç¯è·¯å¾„ï¼Œé˜»æ­¢æ‰§è¡Œ |
| æ–‡ä»¶å†²çª | å¤‡ä»½ç°æœ‰æ–‡ä»¶ï¼Œè®°å½•å†²çªï¼Œè¯·æ±‚äººå·¥å†³ç­– |
| æ‰§è¡Œè¶…æ—¶ | æ ‡è®°ä¸ºfailedï¼Œè®°å½•æ—¥å¿—ï¼Œå…è®¸é‡è¯• |
| éªŒæ”¶å¤±è´¥ | åˆ†æå¤±è´¥åŸå› ï¼Œå°è¯•è‡ªåŠ¨ä¿®å¤æˆ–è¯·æ±‚äººå·¥ä»‹å…¥ |
| è¯­æ³•é”™è¯¯ | è¿è¡ŒLinterï¼Œè‡ªåŠ¨ä¿®å¤æˆ–æŠ¥å‘Šè¯¦ç»†é”™è¯¯ |

### é‡è¯•æœºåˆ¶

ä»»åŠ¡å¤±è´¥åï¼ŒAIå¯ä»¥è‡ªåŠ¨é‡è¯•ï¼š

```yaml
tasks:
  - id: "T1.2.3.4"
    retry_policy:
      max_retries: 3
      retry_delay_seconds: 60
      backoff_multiplier: 2  # æŒ‡æ•°é€€é¿
```

## äººå·¥å¹²é¢„ç‚¹

æŸäº›ä»»åŠ¡éœ€è¦äººå·¥ç¡®è®¤æˆ–è¾“å…¥ï¼š

```yaml
tasks:
  - id: "T_DEPLOY"
    title: "éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ"
    type: "deployment"
    assigned_to: "Human"  # éœ€è¦äººå·¥æ‰§è¡Œ
    require_approval: true
    approval_from: "é¡¹ç›®ç»ç†"
```

AIä¼šæš‚åœæ‰§è¡Œï¼Œç­‰å¾…äººå·¥ç¡®è®¤åç»§ç»­ã€‚

## è¿›åº¦æŠ¥å‘Š

AIå®šæœŸç”Ÿæˆè¿›åº¦æŠ¥å‘Šï¼š

```markdown
# SQLè¡€ç¼˜åˆ†æé¡¹ç›®è¿›åº¦æŠ¥å‘Š
ç”Ÿæˆæ—¶é—´: 2025-10-23 00:30

## é‡Œç¨‹ç¢‘è¿›åº¦
- [âœ…] M0: éœ€æ±‚ä¸è®¾è®¡ (100%) - å·²å®Œæˆ
- [ğŸ”„] M1: æ ¸å¿ƒå¼•æ“åŸå‹ (45%) - è¿›è¡Œä¸­
- [â¸ï¸] M2: å®Œæ•´è§£æèƒ½åŠ› (0%) - æœªå¼€å§‹

## ä»Šæ—¥å®Œæˆä»»åŠ¡
1. âœ… T0.1.1.1 - åˆ›å»ºæŠ€æœ¯æ¶æ„æ–‡æ¡£
2. âœ… T0.2.1.1 - åˆ›å»ºåç«¯é¡¹ç›®éª¨æ¶
3. âœ… T0.3.1.1 - è®¾è®¡æ•°æ®åº“è¡¨ç»“æ„

## è¿›è¡Œä¸­ä»»åŠ¡
1. ğŸ”„ T1.1.2.3 - å®ç°å­—æ®µä¾èµ–è¿½è¸ªç®—æ³• (60%)

## é˜»å¡é—®é¢˜
- âŒ T1.3.4.5 - Druidç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜ï¼ˆç­‰å¾…è§£å†³æ–¹æ¡ˆï¼‰

## é£é™©æç¤º
- âš ï¸ M2æˆªæ­¢æ—¶é—´ä¸´è¿‘ï¼Œå»ºè®®å¢åŠ èµ„æº
```

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šå¯åŠ¨AIæ‰§è¡Œå¼•æ“

**ç”¨æˆ·è¾“å…¥ï¼š**
```
@ai start-task-engine
```

**AIè¾“å‡ºï¼š**
```
ğŸš€ AIä»»åŠ¡æ‰§è¡Œå¼•æ“å·²å¯åŠ¨

ğŸ“‚ åŠ è½½ä»»åŠ¡æ–‡ä»¶: .agents/tasks/sql-lineage.yaml
âœ… ä»»åŠ¡éªŒè¯é€šè¿‡ï¼š5ä¸ªé‡Œç¨‹ç¢‘ï¼Œ23ä¸ªEpicï¼Œ87ä¸ªä»»åŠ¡

ğŸ” åˆ†æä¾èµ–å…³ç³»...
âœ… æ— å¾ªç¯ä¾èµ–

ğŸ“Š ä»»åŠ¡ç»Ÿè®¡ï¼š
- Pending: 85
- Ready: 2
- Completed: 0

ğŸ¯ å‡†å¤‡æ‰§è¡Œé¦–æ‰¹ä»»åŠ¡...
```

### ç¤ºä¾‹2ï¼šæ‰§è¡Œç‰¹å®šé‡Œç¨‹ç¢‘

**ç”¨æˆ·è¾“å…¥ï¼š**
```
@ai execute-milestone M0
```

**AIè¾“å‡ºï¼š**
```
ğŸ¯ æ‰§è¡Œé‡Œç¨‹ç¢‘ M0: éœ€æ±‚ä¸è®¾è®¡

ğŸ“‹ ä»»åŠ¡æ¸…å•ï¼š
1. [T0.1.1.1] åˆ›å»ºæŠ€æœ¯æ¶æ„æ–‡æ¡£
2. [T0.1.2.1] è®¾è®¡å…ƒæ•°æ®è¡¨ç»“æ„
3. [T0.2.1.1] åˆ›å»ºåç«¯é¡¹ç›®éª¨æ¶

â±ï¸ é¢„è®¡è€—æ—¶: 2å°æ—¶

å¼€å§‹æ‰§è¡Œ...

âœ… [1/3] T0.1.1.1 å®Œæˆ (è€—æ—¶: 1åˆ†30ç§’)
   ğŸ“„ åˆ›å»ºæ–‡ä»¶: .agents/docs/tech-stack.md

âœ… [2/3] T0.1.2.1 å®Œæˆ (è€—æ—¶: 3åˆ†15ç§’)
   ğŸ“„ åˆ›å»ºæ–‡ä»¶: docs/schema.sql
   ğŸ“„ åˆ›å»ºæ–‡ä»¶: docs/er-diagram.md

âœ… [3/3] T0.2.1.1 å®Œæˆ (è€—æ—¶: 2åˆ†45ç§’)
   ğŸ“„ åˆ›å»ºæ–‡ä»¶: backend/pom.xml
   ğŸ“ åˆ›å»ºç›®å½•ç»“æ„: backend/src/...

ğŸ‰ é‡Œç¨‹ç¢‘ M0 å·²å®Œæˆï¼
```

## é…ç½®æ–‡ä»¶ä½ç½®

```
F:\00Code\droid3\
â””â”€â”€ .agents/
    â”œâ”€â”€ tasks/
    â”‚   â””â”€â”€ sql-lineage.yaml      # ä»»åŠ¡é…ç½®æ–‡ä»¶
    â”œâ”€â”€ docs/
    â”‚   â”œâ”€â”€ task-format.md         # æœ¬è§„èŒƒæ–‡æ¡£
    â”‚   â””â”€â”€ task-engine.md         # æœ¬å¼•æ“æ–‡æ¡£
    â””â”€â”€ logs/
        â””â”€â”€ execution-2025-10-23.log  # æ‰§è¡Œæ—¥å¿—
```

## ä¸‹ä¸€æ­¥

AIç°åœ¨å¯ä»¥ï¼š
1. âœ… è¯»å–ä»»åŠ¡é…ç½®æ–‡ä»¶
2. âœ… è§£æä»»åŠ¡ä¾èµ–å…³ç³»
3. âœ… æŒ‰ä¼˜å…ˆçº§æ‰§è¡Œä»»åŠ¡
4. âœ… ç”Ÿæˆä»£ç å’Œæ–‡æ¡£
5. âœ… æ›´æ–°ä»»åŠ¡çŠ¶æ€
6. âœ… ç”Ÿæˆè¿›åº¦æŠ¥å‘Š

**ç«‹å³å¼€å§‹ï¼šåˆ›å»ºç¬¬ä¸€ä¸ªä»»åŠ¡æ–‡ä»¶ `sql-lineage.yaml`ï¼**
